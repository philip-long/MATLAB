(********************************************)
(** SYMORO+ : SYmbolic MOdelling of RObots **)
(**========================================**)
(**      IRCCyN-ECN - 1, rue de la Noe     **)
(**      B.P.92101                         **)
(**      44321 Nantes cedex 3, FRANCE      **)
(**      www.irccyn.ec-nantes.fr           **)
(********************************************)


   Name of file : D:/Mes documents/functions/Matlab Funcs/IGM_Tests/Kuka_6ax_simple.pie




     Geometric parameters   


j     ant   mu    sigma gamma b     alpha d     theta r


1     0     1     0     0     0     0     0     t1    0

                                    Pi
2     1     1     0     0     0     --    0     t2    0
                                    2

3     2     1     0     0     0     te    0.4   t3    0

                                    -Pi
4     3     1     0     0     0     ---   0     t4    0.39
                                     2
                                    Pi
5     4     1     0     0     0     --    0     t5    0
                                    2
                                    -Pi
6     5     1     0     0     0     ---   0     t6    0
                                     2

 MGI by pieper

 The given situation is supposed as follows:

 0T6  =    sx   nx   ax   Px

           sy   ny   ay   Py

           sz   nz   az   Pz

           0    0    0    1

TCy=0.39*Cos(te)
TCz=0.39*Sin(te)


Equation in t3

X=0
Z=-0.16000000000000003 + Px**2 + Py**2 + Pz**2 - TCy**2 - TCz**2
X*Cos(t3) - 0.31200000000000006*Sin(t3) = Z


Solution
e = 1  or e = -1
SQ = (-0.31200000000000006*Z + e*X*Sqrt(0.09734400000000003 + X**2 - Z**2))/(0.09734400000000003 + X**2)
CQ = (X*Z + 0.31200000000000006*e*Sqrt(0.09734400000000003 + X**2 - Z**2))/(0.09734400000000003 + X**2)
t3 = ATAN2( SQ , CQ )
Remark :  SQ = Sin(t3)
          CQ = Cos(t3)


Fx=0.4 - 0.39*Sin(t3)
Fy=TCy*Cos(t3)
Fz=TCz*Cos(t3)


Equation in t2

Fy*Cos(t2) + Fx*Sin(t2) = Pz


Solution
e = 1  or e = -1
SQ = (Fx*Pz + e*Fy*Sqrt(Fx**2 + Fy**2 - Pz**2))/(Fx**2 + Fy**2)
CQ = (Fy*Pz - e*Fx*Sqrt(Fx**2 + Fy**2 - Pz**2))/(Fx**2 + Fy**2)
t2 = ATAN2( SQ , CQ )
Remark :  SQ = Sin(t2)
          CQ = Cos(t2)




Equation in t1

c=-(Fx*Cos(t2)) + Fy*Sin(t2)
X=Px**2 + Py**2
Y=Fz*Px - c*Py
X1=-Px**2 - Py**2
Y1=c*Px + Fz*Py
X*Sin(t1) = Y
X1*Cos(t1) = Y1

Solution
t1 = ATAN2(Y/X , Y1/X1 )


U1T21=-(Cos(te)*Sin(t2))
U1T22=Cos(t2)*Cos(te)
U1T31=Sin(t2)*Sin(te)
U1T32=-(Cos(t2)*Sin(te))
U1T111=Cos(t2)*Cos(t3) + U1T21*Sin(t3)
U1T112=Cos(t3)*Sin(t2) + U1T22*Sin(t3)
U1T113=Sin(t3)*Sin(te)
U1T114=-0.4*Cos(t3)
U1T121=U1T21*Cos(t3) - Cos(t2)*Sin(t3)
U1T122=U1T22*Cos(t3) - Sin(t2)*Sin(t3)
U1T123=Cos(t3)*Sin(te)
U1T124=0.4*Sin(t3)
U1T311=U1T111*Cos(t1) + U1T113*Sin(t1)
U1T312=-(U1T113*Cos(t1)) + U1T111*Sin(t1)
U1T321=U1T121*Cos(t1) + U1T123*Sin(t1)
U1T322=-(U1T123*Cos(t1)) + U1T121*Sin(t1)
U1T331=U1T31*Cos(t1) + Cos(te)*Sin(t1)
U1T332=-(Cos(t1)*Cos(te)) + U1T31*Sin(t1)
SNA11=sz*U1T112 + sx*U1T311 + sy*U1T312
SNA12=nz*U1T112 + nx*U1T311 + ny*U1T312
SNA13=az*U1T112 + ax*U1T311 + ay*U1T312
SNA21=-(sz*U1T32) - sx*U1T331 - sy*U1T332
SNA22=-(nz*U1T32) - nx*U1T331 - ny*U1T332
SNA23=-(az*U1T32) - ax*U1T331 - ay*U1T332
SNA31=sz*U1T122 + sx*U1T321 + sy*U1T322
SNA32=nz*U1T122 + nx*U1T321 + ny*U1T322
SNA33=az*U1T122 + ax*U1T321 + ay*U1T322


Equation in t4

-(SNA23*Cos(t4)) + SNA13*Sin(t4) = 0


Solution
t4 = ATAN2(SNA23,SNA13)
 or t4 = ATAN2(-SNA23,-SNA13 ) 


B10=-(SNA13*Cos(t4)) - SNA23*Sin(t4)


Equation in t5

Sin(t5) = B10
-Cos(t5) = -SNA33

Solution
t5 = ATAN2(B10 , SNA33 )


B10=SNA21*Cos(t4) - SNA11*Sin(t4)
B20=SNA22*Cos(t4) - SNA12*Sin(t4)


Equation in t6

Sin(t6) = B10
-Cos(t6) = -B20

Solution
t6 = ATAN2(B10 , B20 )


